import{s as Z,f as v,g as b,A as F,i as P,B as R,y as V,d as p,z as he,a as I,h as H,c as T,j as D,x as g,D as _e,E as de,l as S,m as M,k as oe,n as K,F as He,G as ve,H as Be,C as ge,p as W,e as fe,I as re}from"../chunks/scheduler.b74d2183.js";import{S as $,i as x,a as j,g as Le,t as X,c as Se,f as ie,b as te,d as le,m as se,e as ne}from"../chunks/index.8be64ad0.js";import{p as ue,P as Me,g as Oe,e as ae,n as be,h as ke,a as Re,d as Ue,s as Pe,w as Ve,B as ze,b as Ce}from"../chunks/players.adb9ee9f.js";import{g as Ie}from"../chunks/navigation.6489c892.js";import{e as Te}from"../chunks/singletons.33274246.js";function Ge(s){let e,t="プレイヤーを追加",l,n;return{c(){e=v("button"),e.textContent=t},l(o){e=b(o,"BUTTON",{"data-svelte-h":!0}),F(e)!=="svelte-e6l12u"&&(e.textContent=t)},m(o,a){P(o,e,a),l||(n=R(e,"click",s[0]),l=!0)},p:V,i:V,o:V,d(o){o&&p(e),l=!1,n()}}}function je(s,e,t){let l;he(s,ue,o=>t(1,l=o));function n(){l.push(new Me(Oe())),ue.set(l)}return[n]}class Fe extends ${constructor(e){super(),x(this,e,je,Ge,Z,{})}}function ye(s,e,t){const l=s.slice();return l[4]=e[t],l[5]=e,l[6]=t,l}function Je(s){let e,t=s[4].pos+"",l,n;return{c(){e=v("span"),l=S(t),n=S("マス目"),this.h()},l(o){e=b(o,"SPAN",{class:!0});var a=H(e);l=M(a,t),n=M(a,"マス目"),a.forEach(p),this.h()},h(){D(e,"class","svelte-5g506a")},m(o,a){P(o,e,a),g(e,l),g(e,n)},p(o,a){a&1&&t!==(t=o[4].pos+"")&&K(l,t)},d(o){o&&p(e)}}}function Ke(s){let e,t="ゴール！";return{c(){e=v("span"),e.textContent=t,this.h()},l(l){e=b(l,"SPAN",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-75876m"&&(e.textContent=t),this.h()},h(){D(e,"class","svelte-5g506a")},m(l,n){P(l,e,n)},p:V,d(l){l&&p(e)}}}function qe(s){let e,t,l,n=s[6]+1+"",o,a,r,h=s[4].color[be]+"",i,d,m,_;function k(f,C){return f[4].goaled?Ke:Je}let E=k(s),z=E(s);return{c(){e=v("li"),t=v("span"),l=S("プレイヤー"),o=S(n),a=I(),r=v("span"),i=S(h),d=I(),z.c(),m=I(),_=I(),this.h()},l(f){e=b(f,"LI",{style:!0,class:!0});var C=H(e);t=b(C,"SPAN",{class:!0});var u=H(t);l=M(u,"プレイヤー"),o=M(u,n),u.forEach(p),a=T(C),r=b(C,"SPAN",{class:!0});var w=H(r);i=M(w,h),w.forEach(p),d=T(C),z.l(C),m=T(C),_=T(C),C.forEach(p),this.h()},h(){D(t,"class","svelte-5g506a"),D(r,"class","svelte-5g506a"),oe(e,"background-color",s[4].color[ke]),D(e,"class","svelte-5g506a")},m(f,C){P(f,e,C),g(e,t),g(t,l),g(t,o),g(e,a),g(e,r),g(r,i),g(e,d),z.m(e,null),g(e,m),g(e,_)},p(f,C){C&1&&h!==(h=f[4].color[be]+"")&&K(i,h),E===(E=k(f))&&z?z.p(f,C):(z.d(1),z=E(f),z&&(z.c(),z.m(e,m))),C&1&&oe(e,"background-color",f[4].color[ke])},d(f){f&&p(e),z.d()}}}function We(s){let e,t,l,n,o="次に進む",a,r,h=ae(s[0]),i=[];for(let d=0;d<h.length;d+=1)i[d]=qe(ye(s,h,d));return{c(){e=v("div"),t=v("ul");for(let d=0;d<i.length;d+=1)i[d].c();l=I(),n=v("button"),n.textContent=o,this.h()},l(d){e=b(d,"DIV",{});var m=H(e);t=b(m,"UL",{class:!0});var _=H(t);for(let k=0;k<i.length;k+=1)i[k].l(_);_.forEach(p),m.forEach(p),l=T(d),n=b(d,"BUTTON",{"data-svelte-h":!0}),F(n)!=="svelte-xuq0wd"&&(n.textContent=o),this.h()},h(){D(t,"class","svelte-5g506a")},m(d,m){P(d,e,m),g(e,t);for(let _=0;_<i.length;_+=1)i[_]&&i[_].m(t,null);P(d,l,m),P(d,n,m),a||(r=R(n,"click",s[3]),a=!0)},p(d,[m]){if(m&1){h=ae(d[0]);let _;for(_=0;_<h.length;_+=1){const k=ye(d,h,_);i[_]?i[_].p(k,m):(i[_]=qe(k),i[_].c(),i[_].m(t,null))}for(;_<i.length;_+=1)i[_].d(1);i.length=h.length}},i:V,o:V,d(d){d&&(p(e),p(l),p(n)),_e(i,d),a=!1,r()}}}function Xe(s,e,t){let l;he(s,ue,r=>t(0,l=r));const n=de();return[l,n,(r,h,i,d)=>He(ue,h[i].pos=d.currentTarget.valueAsNumber,l),()=>{Re().goaled||Ue()===-1&&Ie(Te+"/jp/game-end"),n("diced")}]}class Ye extends ${constructor(e){super(),x(this,e,Xe,We,Z,{})}}function Ze(s){let e,t,l,n="この色は何色？",o,a,r=s[2].getColor()+"",h,i,d,m,_,k=s[2].getMaskedDescription()+"",E,z,f,C,u,w,y,N,O,c,Q;return{c(){e=v("dialog"),t=v("div"),l=v("h1"),l.textContent=n,o=I(),a=v("p"),h=S(r),i=I(),d=v("hr"),m=I(),_=v("p"),E=S(k),z=I(),f=v("hr"),C=I(),u=v("input"),y=I(),N=v("button"),O=S("答えを確定する！"),this.h()},l(A){e=b(A,"DIALOG",{class:!0});var q=H(e);t=b(q,"DIV",{class:!0});var B=H(t);l=b(B,"H1",{"data-svelte-h":!0}),F(l)!=="svelte-nb1124"&&(l.textContent=n),o=T(B),a=b(B,"P",{style:!0});var Y=H(a);h=M(Y,r),Y.forEach(p),i=T(B),d=b(B,"HR",{}),m=T(B),_=b(B,"P",{});var G=H(_);E=M(G,k),G.forEach(p),z=T(B),f=b(B,"HR",{}),C=T(B),u=b(B,"INPUT",{type:!0,name:!0,placeholder:!0}),y=T(B),N=b(B,"BUTTON",{class:!0});var L=H(N);O=M(L,"答えを確定する！"),L.forEach(p),B.forEach(p),q.forEach(p),this.h()},h(){oe(a,"background",s[2].getColor()),D(u,"type","text"),D(u,"name","color"),D(u,"placeholder",w="漢字"+s[2].getColorName()[0].length+"文字で入力"),N.disabled=s[4],D(N,"class","svelte-w32227"),D(t,"class","svelte-w32227"),D(e,"class","svelte-w32227")},m(A,q){P(A,e,q),g(e,t),g(t,l),g(t,o),g(t,a),g(a,h),g(t,i),g(t,d),g(t,m),g(t,_),g(_,E),g(t,z),g(t,f),g(t,C),g(t,u),ve(u,s[1]),g(t,y),g(t,N),g(N,O),s[11](e),c||(Q=[R(u,"input",s[8]),R(u,"change",s[9]),R(N,"click",s[10]),R(e,"keydown",Be($e)),R(e,"close",s[12])],c=!0)},p(A,[q]){q&4&&r!==(r=A[2].getColor()+"")&&K(h,r),q&4&&oe(a,"background",A[2].getColor()),q&4&&k!==(k=A[2].getMaskedDescription()+"")&&K(E,k),q&4&&w!==(w="漢字"+A[2].getColorName()[0].length+"文字で入力")&&D(u,"placeholder",w),q&2&&u.value!==A[1]&&ve(u,A[1]),q&16&&(N.disabled=A[4])},i:V,o:V,d(A){A&&p(e),s[11](null),c=!1,ge(Q)}}}const $e=s=>{s.key==="Escape"&&s.preventDefault()};function xe(s,e,t){let{quiz:l}=e,{showQuiz:n}=e,o,{value:a=""}=e,{skip:r}=e,h=!0;const i=de();function d(f){return!(!f||f.length!==l.getColorName()[0].length||f.match(/[a-z]/)||f.match(/[0-9]/)||f.match(/[あ-ん]/))}function m(){a=this.value,t(1,a)}const _=()=>d(a)&&o.close(),k=()=>o.close();function E(f){W[f?"unshift":"push"](()=>{o=f,t(3,o)})}const z=()=>{t(0,n=!1),i("close")};return s.$$set=f=>{"quiz"in f&&t(2,l=f.quiz),"showQuiz"in f&&t(0,n=f.showQuiz),"value"in f&&t(1,a=f.value),"skip"in f&&t(7,r=f.skip)},s.$$.update=()=>{s.$$.dirty&129&&r&&n&&(t(0,n=!1),Pe()),s.$$.dirty&137&&o&&n&&!r&&o.showModal(),s.$$.dirty&2&&t(4,h=!d(a))},[n,a,l,o,h,i,d,r,m,_,k,E,z]}class et extends ${constructor(e){super(),x(this,e,xe,Ze,Z,{quiz:2,showQuiz:0,value:1,skip:7})}}function tt(s){let e,t="不正解！";return{c(){e=v("h1"),e.textContent=t},l(l){e=b(l,"H1",{"data-svelte-h":!0}),F(e)!=="svelte-1by32pg"&&(e.textContent=t)},m(l,n){P(l,e,n)},d(l){l&&p(e)}}}function lt(s){let e,t="正解！";return{c(){e=v("h1"),e.textContent=t},l(l){e=b(l,"H1",{"data-svelte-h":!0}),F(e)!=="svelte-p3udox"&&(e.textContent=t)},m(l,n){P(l,e,n)},d(l){l&&p(e)}}}function st(s){let e,t,l,n,o,a,r,h=s[1].getColorName()[0]+"",i,d,m=s[1].getColorName()[1]+"",_,k,E,z,f=s[1].getDescription()+"",C,u,w,y,N,O=s[1].getReference()+"",c,Q,A,q;function B(L,U){return U&6&&(l=null),l==null&&(l=L[1].getColorName()[0]===L[2]),l?lt:tt}let Y=B(s,-1),G=Y(s);return{c(){e=v("dialog"),t=v("div"),G.c(),n=I(),o=v("h2"),a=S("この色は"),r=v("span"),i=S(h),d=S("("),_=S(m),k=S(")です！"),E=I(),z=v("p"),C=S(f),u=I(),w=v("p"),y=S("出典:"),N=v("a"),c=S(O),this.h()},l(L){e=b(L,"DIALOG",{class:!0});var U=H(e);t=b(U,"DIV",{class:!0});var J=H(t);G.l(J),n=T(J),o=b(J,"H2",{});var ee=H(o);a=M(ee,"この色は"),r=b(ee,"SPAN",{style:!0});var pe=H(r);i=M(pe,h),pe.forEach(p),d=M(ee,"("),_=M(ee,m),k=M(ee,")です！"),ee.forEach(p),E=T(J),z=b(J,"P",{});var me=H(z);C=M(me,f),me.forEach(p),u=T(J),w=b(J,"P",{});var ce=H(w);y=M(ce,"出典:"),N=b(ce,"A",{href:!0,target:!0,rel:!0});var we=H(N);c=M(we,O),we.forEach(p),ce.forEach(p),J.forEach(p),U.forEach(p),this.h()},h(){oe(r,"background",s[1].getColor()),D(N,"href",Q=s[1].getReference()),D(N,"target","_blank"),D(N,"rel","noopener noreferrer"),D(t,"class","svelte-1c5ht4b"),D(e,"class","svelte-1c5ht4b")},m(L,U){P(L,e,U),g(e,t),G.m(t,null),g(t,n),g(t,o),g(o,a),g(o,r),g(r,i),g(o,d),g(o,_),g(o,k),g(t,E),g(t,z),g(z,C),g(t,u),g(t,w),g(w,y),g(w,N),g(N,c),s[5](e),A||(q=[R(N,"keydown",nt),R(e,"click",s[6]),R(e,"keydown",s[7]),R(e,"close",s[8])],A=!0)},p(L,[U]){Y!==(Y=B(L,U))&&(G.d(1),G=Y(L),G&&(G.c(),G.m(t,n))),U&2&&h!==(h=L[1].getColorName()[0]+"")&&K(i,h),U&2&&oe(r,"background",L[1].getColor()),U&2&&m!==(m=L[1].getColorName()[1]+"")&&K(_,m),U&2&&f!==(f=L[1].getDescription()+"")&&K(C,f),U&2&&O!==(O=L[1].getReference()+"")&&K(c,O),U&2&&Q!==(Q=L[1].getReference())&&D(N,"href",Q)},i:V,o:V,d(L){L&&p(e),G.d(),s[5](null),A=!1,ge(q)}}}const nt=s=>s.preventDefault();function ot(s,e,t){let{quiz:l}=e,{answer:n}=e,{showAnswer:o}=e;const a=de();let r;function h(_){W[_?"unshift":"push"](()=>{r=_,t(3,r)})}const i=()=>r.close(),d=()=>r.close(),m=()=>{l.getColorName()[0]!==n&&Ve(),a("close"),t(0,o=!1),Pe()};return s.$$set=_=>{"quiz"in _&&t(1,l=_.quiz),"answer"in _&&t(2,n=_.answer),"showAnswer"in _&&t(0,o=_.showAnswer)},s.$$.update=()=>{s.$$.dirty&9&&r&&o&&r.showModal()},[o,l,n,r,a,h,i,d,m]}class at extends ${constructor(e){super(),x(this,e,ot,st,Z,{quiz:1,answer:2,showAnswer:0})}}function rt(s){let e,t='<div class="svelte-1c5ht4b"><p>ゴール!</p></div>',l,n;return{c(){e=v("dialog"),e.innerHTML=t,this.h()},l(o){e=b(o,"DIALOG",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-x8k9v2"&&(e.innerHTML=t),this.h()},h(){D(e,"class","svelte-1c5ht4b")},m(o,a){P(o,e,a),s[2](e),l||(n=[R(e,"click",s[3]),R(e,"keydown",s[4]),R(e,"close",s[5])],l=!0)},p:V,i:V,o:V,d(o){o&&p(e),s[2](null),l=!1,ge(n)}}}function it(s,e,t){let{goal:l}=e,n;function o(i){W[i?"unshift":"push"](()=>{n=i,t(1,n)})}const a=()=>n.close(),r=()=>n.close(),h=()=>t(0,l=!1);return s.$$set=i=>{"goal"in i&&t(0,l=i.goal)},s.$$.update=()=>{s.$$.dirty&3&&n&&l&&n.showModal()},[l,n,o,a,r,h]}class ut extends ${constructor(e){super(),x(this,e,it,rt,Z,{goal:0})}}function Ae(s){let e,t,l,n,o,a,r,h,i,d;function m(u){s[7](u)}function _(u){s[8](u)}let k={quiz:s[4],skip:s[2]};s[5]!==void 0&&(k.value=s[5]),s[1]!==void 0&&(k.showQuiz=s[1]),e=new et({props:k}),W.push(()=>ie(e,"value",m)),W.push(()=>ie(e,"showQuiz",_)),e.$on("close",s[9]);function E(u){s[10](u)}let z={quiz:s[4],answer:s[5]};s[6]!==void 0&&(z.showAnswer=s[6]),o=new at({props:z}),W.push(()=>ie(o,"showAnswer",E)),o.$on("close",s[11]);function f(u){s[12](u)}let C={};return s[3]!==void 0&&(C.goal=s[3]),h=new ut({props:C}),W.push(()=>ie(h,"goal",f)),{c(){te(e.$$.fragment),n=I(),te(o.$$.fragment),r=I(),te(h.$$.fragment)},l(u){le(e.$$.fragment,u),n=T(u),le(o.$$.fragment,u),r=T(u),le(h.$$.fragment,u)},m(u,w){se(e,u,w),P(u,n,w),se(o,u,w),P(u,r,w),se(h,u,w),d=!0},p(u,w){const y={};w&16&&(y.quiz=u[4]),w&4&&(y.skip=u[2]),!t&&w&32&&(t=!0,y.value=u[5],re(()=>t=!1)),!l&&w&2&&(l=!0,y.showQuiz=u[1],re(()=>l=!1)),e.$set(y);const N={};w&16&&(N.quiz=u[4]),w&32&&(N.answer=u[5]),!a&&w&64&&(a=!0,N.showAnswer=u[6],re(()=>a=!1)),o.$set(N);const O={};!i&&w&8&&(i=!0,O.goal=u[3],re(()=>i=!1)),h.$set(O)},i(u){d||(j(e.$$.fragment,u),j(o.$$.fragment,u),j(h.$$.fragment,u),d=!0)},o(u){X(e.$$.fragment,u),X(o.$$.fragment,u),X(h.$$.fragment,u),d=!1},d(u){u&&(p(n),p(r)),ne(e,u),ne(o,u),ne(h,u)}}}function ft(s){let e,t,l=s[0]&&Ae(s);return{c(){l&&l.c(),e=fe()},l(n){l&&l.l(n),e=fe()},m(n,o){l&&l.m(n,o),P(n,e,o),t=!0},p(n,[o]){n[0]?l?(l.p(n,o),o&1&&j(l,1)):(l=Ae(n),l.c(),j(l,1),l.m(e.parentNode,e)):l&&(Le(),X(l,1,1,()=>{l=null}),Se())},i(n){t||(j(l),t=!0)},o(n){X(l),t=!1},d(n){n&&p(e),l&&l.d(n)}}}function ct(s,e,t){let{showQuiz:l}=e,{player:n}=e,o=!1,a,r,h=!1,i=!1;function d(f){r=f,t(5,r)}function m(f){l=f,t(1,l)}const _=()=>t(6,h=!0);function k(f){h=f,t(6,h)}const E=()=>{t(5,r="")};function z(f){o=f,t(3,o),t(0,n),t(2,i)}return s.$$set=f=>{"showQuiz"in f&&t(1,l=f.showQuiz),"player"in f&&t(0,n=f.player)},s.$$.update=()=>{s.$$.dirty&5&&n&&(t(2,i=n.goaled),i&&(n.quit?t(3,o=!1):(t(3,o=!0),t(0,n.quit=!0,n))),t(4,a=n.getQuiz()))},[n,l,i,o,a,r,h,d,m,_,k,E,z]}class ht extends ${constructor(e){super(),x(this,e,ct,ft,Z,{showQuiz:1,player:0})}}function Ee(s,e,t){const l=s.slice();return l[7]=e[t],l}function Ne(s,e,t){const l=s.slice();return l[10]=e[t],l}function Qe(s){let e,t=s[10].pos+"",l,n,o;return{c(){e=v("div"),l=S(t),n=I(),this.h()},l(a){e=b(a,"DIV",{class:!0,style:!0});var r=H(e);l=M(r,t),n=T(r),r.forEach(p),this.h()},h(){D(e,"class","cell svelte-43znk4"),D(e,"style",o=s[10].render(s[2]))},m(a,r){P(a,e,r),g(e,l),g(e,n)},p(a,r){r&4&&o!==(o=a[10].render(a[2]))&&D(e,"style",o)},d(a){a&&p(e)}}}function De(s){let e,t=ae(s[7]),l=[];for(let n=0;n<t.length;n+=1)l[n]=Qe(Ne(s,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=fe()},l(n){for(let o=0;o<l.length;o+=1)l[o].l(n);e=fe()},m(n,o){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(n,o);P(n,e,o)},p(n,o){if(o&4){t=ae(n[7]);let a;for(a=0;a<t.length;a+=1){const r=Ne(n,t,a);l[a]?l[a].p(r,o):(l[a]=Qe(r),l[a].c(),l[a].m(e.parentNode,e))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&p(e),_e(l,n)}}}function _t(s){let e,t="和色双六",l,n,o,a,r,h,i,d,m,_,k,E,z="戻る",f,C,u;n=new Fe({}),a=new Ye({}),a.$on("diced",s[3]);let w=ae(ze.getBoard()),y=[];for(let c=0;c<w.length;c+=1)y[c]=De(Ee(s,w,c));function N(c){s[4](c)}let O={player:s[1]};return s[0]!==void 0&&(O.showQuiz=s[0]),m=new ht({props:O}),W.push(()=>ie(m,"showQuiz",N)),{c(){e=v("h1"),e.textContent=t,l=I(),te(n.$$.fragment),o=I(),te(a.$$.fragment),r=I(),h=v("div"),i=v("div");for(let c=0;c<y.length;c+=1)y[c].c();d=I(),te(m.$$.fragment),k=I(),E=v("button"),E.textContent=z,this.h()},l(c){e=b(c,"H1",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-f8dwwd"&&(e.textContent=t),l=T(c),le(n.$$.fragment,c),o=T(c),le(a.$$.fragment,c),r=T(c),h=b(c,"DIV",{class:!0});var Q=H(h);i=b(Q,"DIV",{class:!0});var A=H(i);for(let q=0;q<y.length;q+=1)y[q].l(A);A.forEach(p),Q.forEach(p),d=T(c),le(m.$$.fragment,c),k=T(c),E=b(c,"BUTTON",{"data-svelte-h":!0}),F(E)!=="svelte-1pcgjft"&&(E.textContent=z),this.h()},h(){D(e,"class","svelte-43znk4"),D(i,"class","board svelte-43znk4"),D(h,"class","center svelte-43znk4")},m(c,Q){P(c,e,Q),P(c,l,Q),se(n,c,Q),P(c,o,Q),se(a,c,Q),P(c,r,Q),P(c,h,Q),g(h,i);for(let A=0;A<y.length;A+=1)y[A]&&y[A].m(i,null);P(c,d,Q),se(m,c,Q),P(c,k,Q),P(c,E,Q),f=!0,C||(u=R(E,"click",s[5]),C=!0)},p(c,[Q]){if(Q&4){w=ae(ze.getBoard());let q;for(q=0;q<w.length;q+=1){const B=Ee(c,w,q);y[q]?y[q].p(B,Q):(y[q]=De(B),y[q].c(),y[q].m(i,null))}for(;q<y.length;q+=1)y[q].d(1);y.length=w.length}const A={};Q&2&&(A.player=c[1]),!_&&Q&1&&(_=!0,A.showQuiz=c[0],re(()=>_=!1)),m.$set(A)},i(c){f||(j(n.$$.fragment,c),j(a.$$.fragment,c),j(m.$$.fragment,c),f=!0)},o(c){X(n.$$.fragment,c),X(a.$$.fragment,c),X(m.$$.fragment,c),f=!1},d(c){c&&(p(e),p(l),p(o),p(r),p(h),p(d),p(k),p(E)),ne(n,c),ne(a,c),_e(y,c),ne(m,c),C=!1,u()}}}function dt(s,e,t){let l;he(s,ue,i=>t(2,l=i));let n=!1,o=Ce();o==null||o.goaled;const a=()=>{t(0,n=!0)};function r(i){n=i,t(0,n)}const h=()=>Ie(Te+"/");return s.$$.update=()=>{s.$$.dirty&3&&(t(1,o=Ce()),o==null||o.goaled)},[n,o,l,a,r,h]}class bt extends ${constructor(e){super(),x(this,e,dt,_t,Z,{})}}export{bt as component};
